# DBVersionApp

Небольшое FastAPI приложение, отображающее текущую версию базы данных.

## Установка и запуск

Необходимые зависимости могут быть установлены с помощью pip:

```bash
python -m venv .venv
source .venv/bin/activate
python -m pip install -r requirements.txt
```

либо с помощью uv:

```bash
uv venv
source .venv/bin/activate
uv sync
```

Для запуска, подготовьте файл `.env` в соответствии
с шаблоном `.env.example`, заполнив все необходимые данные. Они будут
использоваться для запуска сервера.

После подготовки, достаточно вызвать команду:

```bash
python -m db_version_app
```

Ендпоинт доступен по ссылке:

```
http://127.0.0.1:8000/api/db_version
```

## Важные детали реализации

### Запрет на использование глобальных переменных и объектов

В текущей реализации используется атрибут `app.state`, который рекомендуем
к использованию в FastAPI. При запуске приложения (startapp) создается
и инициализируется пул соединений с БД, который впоследствии используется
в контексте приложения, без использования глобальных переменных.
Без его использования инициализация пула происходила бы при каждом запросе,
что значительно бы замедлило выполнение запросов и не рекомендовано
к запуску в production-like среде.
